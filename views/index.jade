doctype html
html(lang="en")
  head
    title FGLab
    script(src="/javascripts/jquery.min.js")
  body
    h1 Projects
    h2 New Project
    form(action="/new-project", method="POST", enctype="multipart/form-data")
      .form-group
        label(for="protofile") Project.proto
        input(type="file", name="protofile")
      button(type="submit") Upload project

    h2 Existing Projects
    ul#projects
      - each project in projects
        li
          a(href="/projects/" + project._id) #{project.name}
          | &nbsp;
          a(href="/api/projects/" + project._id, class="delete") (delete)

    h1 Machines
    ul#machines
      - each machine in machines
        li
          a(href="/machines/" + machine._id) #{machine.hostname}
          | &nbsp;
          a(href="/api/machines/" + machine._id, class="delete") (delete)

    script.
      $(function() {
        $("a.delete").on("click", function() {
          $.ajax({
            url: $(this).attr("href"),
            type: "DELETE"
          })
          .then(function() {
            location.reload(); // Refresh page
          });
          return false; // Stop event and propagation
        });
      });
